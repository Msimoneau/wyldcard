apply plugin: 'java'
apply plugin: 'application'

repositories {
	mavenCentral()
}

configurations {
	jflex
	jcup
}

dependencies {
	
	jcup group: 'net.sf.squirrel-sql.thirdparty-non-maven', name: 'java-cup', version: '0.11a'
	jflex group: 'de.jflex', name: 'jflex', version: '1.4.1'
	
	compile group: 'net.java.dev.swing-layout', name: 'swing-layout', version:'1.0.2'
	compile configurations.jcup
}

task jflex << {
  javaexec { 
	classpath configurations.jflex
  	main="JFlex.Main" 
  	args "-d", "src/main/java/hypertalk/parser/", "src/main/resources/HtInterpreter.jflex"
  } 
}

task jcup (dependsOn: 'jflex') << {
	javaexec {
		classpath configurations.jcup
		main="java_cup.Main"
		args "-destdir", "src/main/java/hypertalk/parser", "-parser", "HtInterpreter", "-package", "hypertalk.parser", "src/main/resources/HtInterpreter.cup"
	}
}

mainClassName="hypercard.runtime.RuntimeEnv"